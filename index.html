<html>
<head><title>Test</title>
<script src="jquery-1.9.1.js" type="text/javascript"></script>

<script type="text/javascript">
	$.getJSON("./get-tweets1.1.php", function(json) {
		var trends = json[0].trends;
		var HTMLcontent = "";
		var query = "";
		var news = "";
		
		for(var i = 0; i < trends.length; i++){ 
			news = "";
			query = trends[i].name;
			
			news = getNews(query);
			if(news != ""){
				HTMLcontent += "<div class='twitter hit"+i+"'><h1>"+ query +"</h1>";
				HTMLcontent += news;
				HTMLcontent += "</div>";
			}
		}
		$("#content").html(HTMLcontent);
	});
	
 	function getNews(query){
 		var feedzillaHTML = "";
    	$.ajaxSetup( { "async": false } );
    	try {
			$.getJSON("http://api.feedzilla.com/v1/articles/search.json?q="+query+"&count=10&title_only=1", function(json) {
				var news = json.articles;
				for(var i = 0; i < news.length; i++){ 
					feedzillaHTML += "<div class='news news"+i+"'>";
					feedzillaHTML += "<img src='"+news[i].enclosures[0].uri+"' />";
					feedzillaHTML += "<p><a href='"+news[i].source_url+"' target='_blank'>"+ news[i].title +"</p>";
					feedzillaHTML += "</div>";
				}
			});
		} 
    	catch(err) {
        	console.log('error');
    	}
    	$.ajaxSetup( { "async": true} );
		return feedzillaHTML;
	}
 	
 	
</script>
</head>
<body>
	<h1>Prototype</h1>
	<div id="content"></div>
</body>
</html>

