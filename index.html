<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A mashup site using top twitter trends to filter and deliver the top 10 latest US news in a simple format.">
    <meta name="author" content="Raphael StÃ¶cklin <raphael.st@gmx.ch>; Katrin Affolter <katrin.affolter@uzh.ch>; Sven Brunner <svenbrunner5@hotmail.com>; Raphael Ochsenbein <raphael@akehir.com>; Sacha Uhlmann <sacha.uhlmann@uzh.ch;">

    <title>Top Twitter && News (Web 2.0 - Project)</title>

    <!-- Bootstrap Core CSS -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

    <!-- Timeline CSS -->
    <link href="assets/timeline.css" rel="stylesheet">

    <!-- Template CSS -->
    <link href="assets/sb-admin-2.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="assets/web2.0.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="bower_components/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<style>
		#loading {
			display: none;
		}
		body.loading #loading {
			display: block;
			position: fixed;
			width: 100%;
			height: 100%;
			left: 0px;
			top: 0px;
			background: white;
			color: black;
			opacity: 0.9;
			font-size: 40px;
			line-height: 8em;
			z-index: 1001;
			text-align: center;
		}

    </style>
    
    <script src="jquery-1.9.1.js" type="text/javascript"></script>

    <script type="text/javascript">
    	$(document).ready(function() {
    		tweetly(1);    		
    	});
    	
    	function tweetly(woeid){
    		$("body").addClass("loading");
            for(var i = 0; i < 10; i++){
            	$("#hit"+(i+1)).html("");
            }
    		getTweets(woeid).then(function(){
  				$("body").removeClass("loading");
			});}
    	
    	function getTweets(woeid){
        	return $.getJSON("./tweets-"+woeid+".txt", function(json) {
            	var trends = json[0].trends;
            	var query = "";
            	var news = "";

            	for(var i = 0; i < 10; i++){
               		news = "";
                	query = trends[i].name;

                	news = ""; //getNews(woeid, i);
                	$("#hit"+(i+1)).html("<div class='panel-heading'><h1>"+ query +"</h1></div><div class='panel-body'>"+ news + "</div><div class='panel-footer'></div>");
                    $("#container"+(i+1)).removeClass("empty-news");
                	
            	}
            	return 1;
        	});
        	
        }

        function getNews(woeid, count){
            var feedzillaHTML = "";
            $.ajaxSetup( { "async": false } );
            $.getJSON("./tweets-"+woeid+"-"+count+".txt", function(json) {

                var news = json.articles;
                for(var i = 0; i < news.length; i++){
                    feedzillaHTML += "<div class='row'>";
                    feedzillaHTML += "<div class='news news"+(i+1)+"'>";
                    try{
                        feedzillaHTML += "<div class='newspicture col-lg-4 col-xs-4'><img class='img-responsive img-news' src='"+news[i].enclosures[0].uri+"' />";
                        // make column for news entry 8, as image is 4
                        feedzillaHTML += "</div><div class='newsentry col-lg-8 col-xs-8'>";
                    }catch(err) {
                        // make col for news 12, if with news, make col for news 8
                        feedzillaHTML += "<div class='newsentry col-lg-12 col-xs-12'>";
                    }
                    feedzillaHTML += "<p><a href='"+news[i].url+"' target='_blank'>"+ news[i].title+ " | "+ news[i].publish_date +"</a></p>";

                    feedzillaHTML += "</div></div></div>";
                    if(i < (news.length-1) ){
                        feedzillaHTML += "<div class='row'><hr></div>" // add horizontal line as divider to all but the last image.
                    }
                }
            });
            $.ajaxSetup( { "async": true} );
            return feedzillaHTML;
        }
        
    </script>
</head>
<body class="loading">
	<div id="loading">Please wait...</div>
    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Top Twitter News</a>
            </div>
           
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li><button id="woeid23424977" onclick="tweetly(23424977)">USA</button></li>
                        <li><button id="woeid1" onclick="tweetly(1)">World Wide</button></li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper" style="min-height: 1337px;">

            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Top Twitter News Stories</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            


            <div id="content" class="row">
                <div id="container1" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit1" class="panel panel-primary"></div>
                </div>
                <div id="container2" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit2" class="panel panel-primary"></div>
                </div>
                <div id="container3" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit3" class="panel panel-primary"></div>
                </div>
                <div id="container4" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit4" class="panel panel-primary"></div>
                </div>
                <div id="container5" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit5" class="panel panel-primary"></div>
                </div>
                <div id="container6" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit6" class="panel panel-primary"></div>
                </div>
                <div id="container7" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit7" class="panel panel-primary"></div>
                </div>
                <div id="container8" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit8" class="panel panel-primary"></div>
                </div>
                <div id="container9" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit9" class="panel panel-primary"></div>
                </div>
                <div id="container10" class="col-lg-4 col-xs-12 empty-news">
                    <div id="hit10" class="panel panel-primary"></div>
                </div>
            </div><!-- /#content -->



        </div><!-- /#page-wrapper -->
    </div><!-- /#wrapper -->
</body>
</html>

